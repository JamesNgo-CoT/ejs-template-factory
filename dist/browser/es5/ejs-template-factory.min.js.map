{"version":3,"file":"ejs-template-factory.min.js","sources":["ejs-template-factory.min.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar EjsTemplateFactory = function () {\n  function frag(children) {\n    return children == null ? '' : !Array.isArray(children) ? children : children.filter(function (value) {\n      return value != null;\n    }).join('');\n  }\n\n  function tag(name, attributes, children) {\n    if (typeof name === 'function') {\n      name(attributes, children);\n    }\n\n    var openTag = \"<\".concat([name].concat(_toConsumableArray(attributes == null ? [] : Object.keys(attributes).map(function (key) {\n      return attributes[key] == null ? null : \"\".concat(key, \"=\\\"\").concat(attributes[key], \"\\\"\");\n    }).filter(function (attribute) {\n      return attribute != null;\n    }))).join(' '), \">\");\n\n    if (children == null) {\n      return openTag;\n    }\n\n    return \"\".concat(openTag).concat(frag(children), \"</\").concat(name, \">\");\n  }\n\n  function style(properties) {\n    return properties == null ? '' : Object.keys(properties).map(function (key) {\n      return properties[key] == null ? null : properties[key] && _typeof(properties[key]) === 'object' ? \"\".concat(key, \" { \").concat(style(properties[key]), \" }\") : \"\".concat(key, \": \").concat(properties[key], \";\");\n    }).filter(function (value) {\n      return value != null;\n    }).join(' ');\n  }\n\n  function exp(value) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$escaped = _ref.escaped,\n        escaped = _ref$escaped === void 0 ? false : _ref$escaped;\n\n    return \"\".concat(escaped ? '<%-' : '<%=', \" \").concat(value, \" %>\");\n  }\n\n  function code(value) {\n    return ['<%', value == null ? null : value, '%>'].filter(function (value) {\n      return value != null;\n    }).join(' ');\n  }\n\n  function cond(condition, trueChildren, falseChildren) {\n    return [code(\"if (\".concat(condition, \") {\")), trueChildren == null ? null : frag(trueChildren)].concat(_toConsumableArray(falseChildren == null ? [] : ['<% } else { %>', frag(falseChildren)]), [code('}')]).filter(function (value) {\n      return value != null;\n    }).join('');\n  }\n\n  function forLoop(initial, condition, increment, children) {\n    return [code(\"for (let \".concat(initial, \"; \").concat(condition, \"; \").concat(increment, \") {\")), children == null ? null : frag(children), code('}')].filter(function (value) {\n      return value != null;\n    }).join('');\n  }\n\n  function doLoop(children, condition) {\n    return [code('do {'), children == null ? null : frag(children), code(\"} while(\".concat(condition, \")\"))].filter(function (value) {\n      return value != null;\n    }).join('');\n  }\n\n  function whileLoop(condition, children) {\n    return [code(\"while(\".concat(condition, \") {\")), children == null ? null : frag(children), code('}')].filter(function (value) {\n      return value != null;\n    }).join('');\n  }\n\n  function fromJson(json) {\n    return json == null ? '' : Array.isArray(json) ? fromJson({\n      type: 'frag',\n      children: json\n    }) : _typeof(json) === 'object' ? fromJson[json.type] ? fromJson[json.type](json) : '' : json;\n  }\n\n  fromJson.frag = function () {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        children = _ref2.children;\n\n    return frag(children == null ? children : Array.isArray(children) ? children.map(function (child) {\n      return fromJson(child);\n    }) : fromJson(children));\n  };\n\n  fromJson.tag = function (_ref3) {\n    var name = _ref3.name,\n        attributes = _ref3.attributes,\n        children = _ref3.children;\n    return tag(name, attributes, children == null ? children : fromJson(children));\n  };\n\n  fromJson.exp = function (_ref4) {\n    var value = _ref4.value,\n        options = _ref4.options;\n    return exp(value, options);\n  };\n\n  fromJson.code = function (_ref5) {\n    var value = _ref5.value;\n    return code(value);\n  };\n\n  fromJson.cond = function (_ref6) {\n    var condition = _ref6.condition,\n        trueChildren = _ref6.trueChildren,\n        falseChildren = _ref6.falseChildren;\n    return cond(condition, trueChildren == null ? trueChildren : fromJson(trueChildren), falseChildren == null ? falseChildren : fromJson(falseChildren));\n  };\n\n  fromJson.forLoop = function (_ref7) {\n    var initial = _ref7.initial,\n        condition = _ref7.condition,\n        increment = _ref7.increment,\n        children = _ref7.children;\n    return forLoop(initial, condition, increment, children == null ? children : fromJson(children));\n  };\n\n  fromJson.doLoop = function (_ref8) {\n    var children = _ref8.children,\n        condition = _ref8.condition;\n    return doLoop(children == null ? children : fromJson(children), condition);\n  };\n\n  fromJson.whileLoop = function (_ref9) {\n    var condition = _ref9.condition,\n        children = _ref9.children;\n    return whileLoop(condition, children == null ? children : fromJson(children));\n  };\n\n  return;\n  {\n    frag, tag, style, exp, code, cond, forLoop, doLoop, whileLoop, fromJson;\n  }\n  ;\n}();\n/* exported EjsTemplateFactory */"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","toString","call","slice","name","Array","from","test","iter","isArray","len","length","i","arr2","EjsTemplateFactory"],"mappings":"aAEA,SAASA,QAAQC,GAAkC,OAAOD,QAAU,mBAAqBE,QAAU,iBAAmBA,OAAOC,SAAW,SAAUF,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAO,mBAAqBC,QAAUD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAgBA,GAEzU,SAASK,mBAAmBC,GAAO,OAAOC,mBAAmBD,IAAQE,iBAAiBF,IAAQG,4BAA4BH,IAAQI,qBAElI,SAASA,qBAAuB,MAAM,IAAIC,UAAU,wIAEpD,SAASF,4BAA4BG,EAAGC,GAAU,GAAKD,EAAL,CAAgB,GAAiB,iBAANA,EAAgB,OAAOE,kBAAkBF,EAAGC,GAAS,IAAIE,EAAIC,OAAOZ,UAAUa,SAASC,KAAKN,GAAGO,MAAM,GAAI,GAAiE,MAAU,SAAlCJ,EAA3B,WAANA,GAAkBH,EAAET,YAAiBS,EAAET,YAAYiB,KAAUL,IAAqB,QAANA,EAAoBM,MAAMC,KAAKV,GAAc,cAANG,GAAqB,2CAA2CQ,KAAKR,GAAWD,kBAAkBF,EAAGC,QAAzG,GAE7S,SAASL,iBAAiBgB,GAAQ,GAAsB,oBAAXvB,QAAmD,MAAzBuB,EAAKvB,OAAOC,WAA2C,MAAtBsB,EAAK,cAAuB,OAAOH,MAAMC,KAAKE,GAEtJ,SAASjB,mBAAmBD,GAAO,GAAIe,MAAMI,QAAQnB,GAAM,OAAOQ,kBAAkBR,GAEpF,SAASQ,kBAAkBR,EAAKoB,IAAkB,MAAPA,GAAeA,EAAMpB,EAAIqB,UAAQD,EAAMpB,EAAIqB,QAAQ,IAAK,IAAIC,EAAI,EAAGC,EAAO,IAAIR,MAAMK,GAAME,EAAIF,EAAKE,IAAOC,EAAKD,GAAKtB,EAAIsB,GAAM,OAAOC,EAEhL,IAAIC,wBAAqB"}